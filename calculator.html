<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>足球计算器</title>
    <script src="js/jquery-3.2.1.min.js"></script>
</head>
<style>
    input{
        color: red;
    }
    .flex{
        display: flex;
        flex-direction: column;
    }
    .w{
        width: 81px;
    }
    table{
        width: 306px;
    }
    td>input{
        width: 26px;
    }
    .opendd>input{
        width: 30px;
    }
    .wire{
        width: 300px;
        height: 1px;
        background-color: red;
        margin-top: 5px;
    }
    .le{
        margin-left: 10px;
    }
    .le1{
        margin-left: 27px;
    }
    .re{
        position: relative;
        top: 21px;
        display: inline-block;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        border: 1px solid black;
        line-height: 20px;
        text-align: center;
        color: red;
        margin-right: 5px;
    }
    .red{
        color: red;
    }
    .font-s{
        font-size: 11px;
    }
    .display-goal{
        display: none;
    }
    .display-htc{
        display: none;
    }
    .display-wod{
        display: none;
    }
    .display-cp{
        display: none;
    }
    .display-score{
        display: none;
    }
    .bunchAll>tbody>tr>td{
        cursor: pointer;
        text-align: center;
    }
    tbody::after{
        content: '';
        display: block;
        border-bottom: 1px solid red;
        width: 300px;
        position: absolute;
    }
    .redB{
        background-color: red;
    }
    .pattern>td{
        padding: 2px;
    }
    /* svg{
        width: 22px;
        height: 22px;
    } */
    .curp{
        cursor: pointer;
        margin: 0 5px 0 5px
    }
</style>
<body>
    <div class="flex">
        <table class="bunchAll">
            <tbody class="session">
                <tr class="bunch">
                    <td colspan="8">队名：<input type="text" class="Tname0" style="width: 200px;"></td>
                </tr>
                <tr class="pattern">
                    <td colspan="2" class="goal" attr="0">进球数</td>
                    <td colspan="2" class="htc" attr="0">半全场</td>
                    <td colspan="2" class="wod" attr="0">胜平负</td>
                    <td class="cp" attr="0">让球</td>
                    <td class="score" attr="0">比分</td>
                </tr>
            </tbody>
        </table>
        <div style="display: flex;margin: 5px 0 5px 0;">
            <span>场次加减：</span>
            <svg t="1704802485722" style="border:1px solid;" class="add curp" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6581" xmlns:xlink="http://www.w3.org/1999/xlink" width="22" height="22"><path d="M939.939489 459.072557 562.339502 459.072557 562.339502 83.519182 462.055494 83.519182 462.055494 459.072557 84.455507 459.072557 84.455507 559.356564 462.055494 559.356564 462.055494 939.003164 562.339502 939.003164 562.339502 559.356564 939.939489 559.356564Z" fill="#272636" p-id="6582"></path></svg>
            <svg t="1704802566908"  style="border:1px solid;" class="sub curp" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7561" width="22" height="22"><path d="M928 425.6v144H96v-144z" fill="#000000" p-id="7562"></path></svg>
        </div>
        <div>
            <span>投入金额：</span><input type="text" class="betsum">
        </div>
        <div class="sb">
            <?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1704800708790" class="affirm curp" viewBox="0 0 1026 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4829" xmlns:xlink="http://www.w3.org/1999/xlink" width="50" height="50"><path d="M963.086652 212.044394 62.417562 212.044394c-34.472116 0-62.417585 27.945469-62.417585 62.417585l0 436.632475c0 34.474163 27.945469 62.417585 62.417585 62.417585l900.66909 0c34.473139 0 62.415538-27.944446 62.415538-62.417585L1025.50219 274.461979C1025.50219 239.989863 997.557745 212.044394 963.086652 212.044394zM182.415563 432.019411 164.826976 432.019411c-5.756097 0-10.233062-1.703805-13.430894-5.116531-3.412726-3.622504-5.116531-8.099469-5.116531-13.430894 0-5.326309 1.703805-9.698896 5.116531-13.111622 3.197832-3.40761 7.674796-5.116531 13.430894-5.116531l17.588587 0 0-39.333844c0-6.180769 1.703805-11.192923 5.116531-15.030321 3.40761-3.40761 7.780197-5.221932 13.111622-5.436826 5.326309 0.214894 9.698896 1.918699 13.111622 5.116531 3.622504 3.837398 5.436826 8.953929 5.436826 15.349593l0 39.333844 18.547425 0c5.541203 0 9.91379 1.599428 13.111622 4.797259 3.40761 3.62762 5.116531 8.104585 5.116531 13.430894 0 5.331425-1.708921 9.702989-5.116531 13.111622-3.412726 3.62762-7.78429 5.436826-13.111622 5.436826l-18.547425 0 0 48.927339c4.476965-4.26207 10.018168-5.646604 16.628726-4.157693 4.476965 1.069355 8.099469 3.837398 10.872628 8.314363 2.768043 4.906753 3.837398 9.702989 3.197832 14.390755-0.214894 4.267187-3.307326 8.104585-9.274224 11.512195-5.756097 3.412726-12.900821 7.03523-21.425985 10.872628l0 83.783195c0 16.414855-6.395664 28.780487-19.186991 37.09485-7.250124 4.263094-16.309454 5.965875-27.182083 5.116531-14.285355-0.213871-23.663956-3.518127-28.14092-9.91379-2.348488-4.267187-3.092431-8.953929-2.238994-14.07046 2.768043-11.726066 10.553357-16.309454 23.344684-13.751189 2.982938 0.209778 4.901637 0.209778 5.756097 0 2.768043 0.639566 5.116531 0 7.03523-1.918699 2.768043-2.772136 4.047176-6.825452 3.837398-12.151761l0-59.479673c-6.185886 2.134617-11.512195 3.946892-15.989159 5.436826-5.54632 1.708921-10.342556 1.49505-14.390755-0.639566-4.267187-2.128477-7.144724-5.860475-8.634658-11.192923-1.494027-4.901637-1.279133-9.593496 0.639566-14.07046 2.128477-4.476965 5.861498-7.459902 11.192923-8.953929 7.884574-2.768043 16.949021-6.076392 27.182083-9.91379L182.415563 432.019411zM284.746183 609.818863c-10.447956 23.873734-20.146852 36.561707-29.100782 38.054711-4.267187 0.209778-8.744151-1.069355-13.430894-3.837398-4.906753-3.411703-7.78429-7.465019-8.634658-12.151761-0.854461-4.906753 0.320295-9.702989 3.518127-14.390755 14.07046-20.466124 23.024389-42.211381 26.861788-65.23577 1.064238-15.559371 3.518127-24.943089 7.355525-28.14092 3.837398-2.768043 8.419763-4.047176 13.751189-3.837398 4.901637 0.639566 9.05933 2.667759 12.472056 6.076392 4.26207 4.691859 4.686742 16.947997 1.279133 36.774555 0.639566 0.215918 1.064238 0.74906 1.279133 1.599428 0.209778 1.069355 0.639566 2.028193 1.279133 2.87856 7.884574 16.628726 18.972097 28.461215 33.257451 35.496445l0-89.858564L270.994994 513.246387c-5.54632 0-9.91379-1.599428-13.111622-4.797259-3.197832-3.40761-4.797259-7.780197-4.797259-13.111622 0-4.901637 1.599428-9.05933 4.797259-12.472056 3.40761-3.40761 7.780197-5.116531 13.111622-5.116531l161.170726 0c5.326309 0.214894 9.593496 1.708921 12.791327 4.476965 3.197832 3.412726 4.796236 7.78429 4.796236 13.111622 0 4.906753-1.599428 9.063423-4.796236 12.472056-3.197832 3.62762-7.465019 5.436826-12.791327 5.436826l-60.758806 0 0 28.460192 49.246611 0c5.326309 0.215918 9.593496 1.708921 12.791327 4.476965 3.197832 3.413749 4.797259 7.78429 4.797259 13.111622 0 4.906753-1.599428 9.063423-4.797259 12.472056-3.197832 3.62762-7.465019 5.436826-12.791327 5.436826l-49.246611 0 0 31.019481c1.064238 0 2.343371 0 3.837398 0l58.20054 0c6.180769 0.209778 11.192923 2.025123 15.029298 5.436826 3.623527 3.197832 5.542226 7.674796 5.756097 13.430894-0.213871 5.542226-1.918699 10.019191-5.116531 13.430894-4.051269 3.837398-9.273201 5.756097-15.668865 5.756097l-44.13008 0c-16.204054-0.213871-31.448246-1.388627-45.729507-3.518127C320.5619 639.558188 300.94512 628.576065 284.746183 609.818863zM295.618811 467.195561c-7.250124-0.209778-12.900821-2.87856-16.949021-7.995091-5.116531-6.605442-7.569396-13.536294-7.355525-20.786419l0-66.835198c0-6.605442 2.343371-12.257162 7.03523-16.949021 4.901637-5.116531 10.657734-7.565303 17.268292-7.355525l17.907858 0 95.29539 0c8.314363-0.209778 15.349593 2.238994 21.10569 7.355525 4.686742 4.267187 7.140631 9.91379 7.355525 16.949021l0 66.835198c0 7.465019-2.988054 14.179954-8.953929 20.146852-5.756097 5.54632-12.261255 8.423857-19.507286 8.634658L295.618811 467.195561zM401.786829 393.326157l0-3.837398c0-1.703805-0.639566-3.197832-1.918699-4.476965-1.708921-1.488911-3.307326-2.238994-4.797259-2.238994l-81.545224 0c-1.918699-0.209778-3.518127 0.429789-4.797259 1.918699-1.279133 1.708921-1.918699 3.307326-1.918699 4.797259l0 3.837398L401.786829 393.326157zM306.810711 421.146782l0 3.837398c0 1.708921 0.639566 3.307326 1.918699 4.797259 1.279133 1.279133 2.87856 1.918699 4.797259 1.918699l81.545224 0c1.918699 0 3.518127-0.744967 4.797259-2.238994 1.064238-1.488911 1.703805-2.982938 1.918699-4.476965l0-3.837398L306.810711 421.146782zM599.73211 528.914228c-4.906753-1.279133-8.744151-4.157693-11.512195-8.634658-2.772136-5.116531-3.518127-9.91379-2.238994-14.390755 1.279133-5.116531 4.583388-9.378601 9.91379-12.791327 32.617885-21.530362 57.560974-47.967478 74.829266-79.30623 1.065262-1.918699 2.344395-3.518127 3.837398-4.797259L604.848641 408.993998c-5.756097 0-10.233062-1.703805-13.430894-5.116531-3.411703-3.622504-5.116531-8.099469-5.116531-13.430894 0-5.326309 1.704828-9.698896 5.116531-13.111622 3.197832-3.40761 7.674796-5.116531 13.430894-5.116531l117.360941 0c-2.988054-13.855566-3.518127-23.024389-1.599428-27.501354 2.558265-4.26207 6.502088-7.140631 11.83249-8.634658 5.326309-1.703805 10.233062-1.279133 14.710027 1.279133 7.03523 4.052293 11.618619 15.669888 13.751189 34.856879l111.284549 0c5.542226 0 9.91379 1.599428 13.111622 4.797259 3.40761 3.62762 5.116531 8.104585 5.116531 13.430894 0 5.331425-1.708921 9.702989-5.116531 13.111622-3.411703 3.62762-7.78429 5.436826-13.111622 5.436826l-72.271 0c1.918699 1.069355 3.837398 2.348488 5.756097 3.837398 24.5133 21.535479 50.311873 50.846038 77.387531 87.940888 3.623527 5.116531 5.116531 10.023284 4.476965 14.710027-0.639566 5.116531-3.197832 9.383718-7.674796 12.791327-4.476965 2.987031-9.063423 4.052293-13.751189 3.197832-4.906753-0.849344-9.274224-3.941775-13.111622-9.273201-10.023284-13.430894-19.507286-25.367761-28.461215-35.815717-14.500249 34.111912-33.577746 62.35721-57.241702 84.742033 27.501354 17.48421 62.037938 30.699186 103.609753 39.653115 6.605442 1.704828 11.298324 4.583388 14.07046 8.634658 2.558265 4.263094 3.40761 9.060353 2.558265 14.390755-1.708921 5.756097-4.586458 9.699919-8.634658 11.83249-4.690836 2.983961-10.023284 3.837398-15.989159 2.558265-48.397267-10.446933-90.178859-28.461215-125.355009-54.04387-33.471322 22.594601-74.509994 40.078811-123.117039 52.444443-6.185886 1.704828-11.512195 1.169639-15.989159-1.599428-4.476965-2.348488-7.465019-6.185886-8.953929-11.512195-1.069355-5.54632-0.533143-10.342556 1.599428-14.390755 2.768043-4.690836 12.151761-9.063423 28.14092-13.111622 37.09485-10.446933 67.154469-22.4892 90.178859-36.136012-10.872628-11.296277-20.895913-24.727171-30.05962-40.292682-8.314363-13.216-15.349593-26.326599-21.10569-39.33282C630.111001 517.936199 610.604739 530.831904 599.73211 528.914228zM711.335931 516.122901c8.524141 12.366655 17.374716 23.024389 26.542516 31.978319 27.501354-24.728194 47.327912-55.42738 59.479673-92.097558-5.54632-5.756097-10.872628-10.872628-15.989159-15.349593-4.690836-4.047176-7.355525-8.634658-7.995091-13.751189 0-4.901637 1.704828-9.378601 5.116531-13.430894 1.488911-2.128477 3.197832-3.622504 5.116531-4.476965l-83.143629 0c2.558265 2.133593 4.263094 4.906753 5.116531 8.314363 1.065262 5.331425 0 10.662851-3.197832 15.989159-5.969968 8.953929-11.83249 17.377786-17.588587 25.263383C693.318579 483.295238 702.168131 502.482229 711.335931 516.122901z" fill="#d81e06" p-id="4830"></path></svg>
        </div>
        <div class="flex">
            <div class="opendd">
            </div>
        </div>
        
    </div>
</body>
</html>

<script>
    let bunchId = 1
    let affirm = $('.affirm')
    let e = []
    $(".add").click(function(){
        $(".bunchAll").append(`
            <tbody>
                <tr class="bunch">
                    <td colspan="8">队名：<input type="text" class="Tname${bunchId}" style="width: 200px;"></td>
                </tr>
                <tr class="pattern">
                    <td colspan="2" class="goal" attr="${bunchId}">进球数</td>
                    <td colspan="2" class="htc" attr="${bunchId}">半全场</td>
                    <td colspan="2" class="wod" attr="${bunchId}">胜平负</td>
                    <td class="cp" attr="${bunchId}">让球</td>
                    <td class="score" attr="${bunchId}">比分</td>
                </tr>
            </tbody>
        `)
        bunchId++
    })
    $(".sub").click(function(){
        console.log(bunchId)
        if(bunchId > 1){
            let children = $('.bunchAll').children();
            children.eq(bunchId-1).remove();
            // console.log(profits)
            if(bunchId == 2 && typeof rate2 !='undefined'){
                rate2 = rate2.filter(function(){
                    // return false
                    // bunchId++
                })
                bunchId--
                $(affirm).click()
                bunchId++
            }
            if(bunchId == 3 && typeof rate3 !='undefined'){
                rate3 = rate3.filter(function(){
                    // return false
                    // bunchId++
                })
                bunchId--
                $(affirm).click()
                bunchId++
            }
            if(bunchId == 4 && typeof rate4 !='undefined'){
                rate4 = rate4.filter(function(){
                    // return false
                    // bunchId++
                })
                bunchId--
                $(affirm).click()
                bunchId++
            }
            bunchId--
        }
    })

    $(this).click(function(event){
        if(event.target.className == "goal"){
            $(event.target).addClass("redB")
            $(event.target).siblings().removeClass("redB")
            $(event.target).parent().nextAll().remove()
            $(event.target).parent().parent().append(
                `
                    <tr>
                        <td>0球</td>
                        <td>1球</td>
                        <td>2球</td>
                        <td>3球</td>
                        <td>4球</td>
                        <td>5球</td>
                        <td>6球</td>
                        <td>7球</td>
                    </tr>
                    <tr>
                        <td><input type="text" class="zero-${$(event.target).attr('attr')}" placeholder="" attr="(0)球"></td>
                        <td><input type="text" class="one-${$(event.target).attr('attr')}" placeholder="" attr="(1)球"></td>
                        <td><input type="text" class="two-${$(event.target).attr('attr')}" placeholder="" attr="(2)球"></td>
                        <td><input type="text" class="three-${$(event.target).attr('attr')}" placeholder="" attr="(3)球"></td>
                        <td><input type="text" class="four-${$(event.target).attr('attr')}" placeholder="" attr="(4)球"></td>
                        <td><input type="text" class="five-${$(event.target).attr('attr')}" placeholder="" attr="(5)球"></td>
                        <td><input type="text" class="six-${$(event.target).attr('attr')}" placeholder="" attr="(6)球"></td>
                        <td><input type="text" class="seven-${$(event.target).attr('attr')}" placeholder="" attr="(7)球"></td>
                    </tr>
                `
            )
        }
        if(event.target.className == "htc"){
            $(event.target).addClass("redB")
            $(event.target).siblings().removeClass("redB")
            $(event.target).parent().nextAll().remove()
            $(event.target).parent().parent().append(
                `
                <tr>
                    <td>胜胜</td>
                    <td>胜平</td>
                    <td>胜负</td>
                    <td>平胜</td>
                    <td>平平</td>
                    <td>负胜</td>
                    <td>负平</td>
                    <td>负负</td>
                </tr>
                <tr>
                    <td><input type="text" class="zero-${$(event.target).attr('attr')}" placeholder="" attr="胜胜"></td>
                    <td><input type="text" class="one-${$(event.target).attr('attr')}" placeholder="" attr="胜平"></td>
                    <td><input type="text" class="two-${$(event.target).attr('attr')}" placeholder="" attr="胜负"></td>
                    <td><input type="text" class="three-${$(event.target).attr('attr')}" placeholder="" attr="平胜"></td>
                    <td><input type="text" class="four-${$(event.target).attr('attr')}" placeholder="" attr="平平"></td>
                    <td><input type="text" class="five-${$(event.target).attr('attr')}" placeholder="" attr="负胜"></td>
                    <td><input type="text" class="six-${$(event.target).attr('attr')}" placeholder="" attr="负平"></td>
                    <td><input type="text" class="seven-${$(event.target).attr('attr')}" placeholder="" attr="负负"></td>
                </tr>
                <tr>
                    <td>平负</td>
                </tr>
                <tr>
                    <td><input type="text" class="eig-${$(event.target).attr('attr')}" placeholder="" attr="平负"></td>
                </tr>
                `
            )
        }
        if(event.target.className == "wod"){
            $(event.target).addClass("redB")
            $(event.target).siblings().removeClass("redB")
            $(event.target).parent().nextAll().remove()
            $(event.target).parent().parent().append(
                `
                <tr>
                    <td>胜</td>
                    <td>平</td>
                    <td>负</td>
                    <td style="opacity: 0">负</td>
                    <td style="opacity: 0">负</td>
                    <td style="opacity: 0">负</td>
                    <td style="opacity: 0">负</td>
                    <td style="opacity: 0">负</td>
                </tr>
                <tr>
                    <td><input type="text" class="zero-${$(event.target).attr('attr')}" placeholder="" attr="胜"></td>
                    <td><input type="text" class="one-${$(event.target).attr('attr')}" placeholder="" attr="平"></td>
                    <td><input type="text" class="two-${$(event.target).attr('attr')}" placeholder="" attr="负"></td>
                    <td style="opacity: 0"><input></td>
                    <td style="opacity: 0"><input></td>
                    <td style="opacity: 0"><input></td>
                    <td style="opacity: 0"><input></td>
                    <td style="opacity: 0"><input></td>
                </tr>
                `
            )
        }
        if(event.target.className == "cp"){
            $(event.target).addClass("redB")
            $(event.target).siblings().removeClass("redB")
            $(event.target).parent().nextAll().remove()
            $(event.target).parent().parent().append(
                `
                <tr>
                    <td>让胜</td>
                    <td>让平</td>
                    <td>让负</td>
                    <td style="opacity: 0">负</td>
                    <td style="opacity: 0">负</td>
                    <td style="opacity: 0">负</td>
                    <td style="opacity: 0">负</td>
                    <td style="opacity: 0">负</td>
                </tr>
                <tr>
                    <td><input type="text" class="zero-${$(event.target).attr('attr')}" placeholder="" attr="让胜"></td>
                    <td><input type="text" class="one-${$(event.target).attr('attr')}" placeholder="" attr="让平"></td>
                    <td><input type="text" class="two-${$(event.target).attr('attr')}" placeholder="" attr="让负"></td>
                    <td style="opacity: 0"><input></td>
                    <td style="opacity: 0"><input></td>
                    <td style="opacity: 0"><input></td>
                    <td style="opacity: 0"><input></td>
                    <td style="opacity: 0"><input></td>
                </tr>
                `
            )
        }
        if(event.target.className == "score"){
            $(event.target).addClass("redB")
            $(event.target).siblings().removeClass("redB")
            $(event.target).parent().nextAll().remove()
            $(event.target).parent().parent().append(
                `
                <tr>
                    <td>0:0</td>
                    <td>0:1</td>
                    <td>0:2</td>
                    <td>0:3</td>
                    <td>0:4</td>
                    <td>0:5</td>
                    <td>1:0</td>
                    <td>1:1</td>
                </tr>
                <tr>
                    <td><input type="text" class="zero-${$(event.target).attr('attr')}" placeholder="" attr=0:0></td>
                    <td><input type="text" class="one-${$(event.target).attr('attr')}" placeholder="" attr=0:1></td>
                    <td><input type="text" class="two-${$(event.target).attr('attr')}" placeholder="" attr=0:2></td>
                    <td><input type="text" class="three-${$(event.target).attr('attr')}" placeholder="" attr=0:3></td>
                    <td><input type="text" class="four-${$(event.target).attr('attr')}" placeholder="" attr=0:4></td>
                    <td><input type="text" class="five-${$(event.target).attr('attr')}" placeholder="" attr=0:5></td>
                    <td><input type="text" class="six-${$(event.target).attr('attr')}" placeholder="" attr=1:0></td>
                    <td><input type="text" class="seven-${$(event.target).attr('attr')}" placeholder="" attr=1:1></td>
                </tr>
                <tr>
                    <td>1:2</td>
                    <td>1:3</td>
                    <td>1:4</td>
                    <td>1:5</td>
                    <td>2:0</td>
                    <td>2:1</td>
                    <td>2:2</td>
                    <td>2:3</td>
                </tr>
                <tr>
                    <td><input type="text" class="eig-${$(event.target).attr('attr')}" placeholder="" attr="1:2"></td>
                    <td><input type="text" class="nine-${$(event.target).attr('attr')}" placeholder="" attr="1:3"></td>
                    <td><input type="text" class="eleven-${$(event.target).attr('attr')}" placeholder="" attr="1:4"></td>
                    <td><input type="text" class="twelve-${$(event.target).attr('attr')}" placeholder="" attr="1:5"></td>
                    <td><input type="text" class="thirteen-${$(event.target).attr('attr')}" placeholder="" attr="2:0"></td>
                    <td><input type="text" class="fourteen-${$(event.target).attr('attr')}" placeholder="" attr="2:1"></td>
                    <td><input type="text" class="fifteen-${$(event.target).attr('attr')}" placeholder="" attr="2:2"></td>
                    <td><input type="text" class="sixteen-${$(event.target).attr('attr')}" placeholder="" attr="2:3"></td>
                </tr>
                <tr>
                    <td>2:4</td>
                    <td>2:5</td>
                    <td>3:0</td>
                    <td>3:1</td>
                    <td>3:2</td>
                    <td>3:3</td>
                    <td>4:0</td>
                    <td>4:1</td>
                </tr>
                <tr>
                    <td><input type="text" class="seventeen-${$(event.target).attr('attr')}" placeholder="" attr="2:4"></td>
                    <td><input type="text" class="eighteen-${$(event.target).attr('attr')}" placeholder="" attr="2:5"></td>
                    <td><input type="text" class="nineteen-${$(event.target).attr('attr')}" placeholder="" attr="3:0"></td>
                    <td><input type="text" class="twenty-${$(event.target).attr('attr')}" placeholder="" attr="3:1"></td>
                    <td><input type="text" class="twentyOne-${$(event.target).attr('attr')}" placeholder="" attr="3:2"></td>
                    <td><input type="text" class="twentyTwo-${$(event.target).attr('attr')}" placeholder="" attr="3:3"></td>
                    <td><input type="text" class="twentyThree-${$(event.target).attr('attr')}" placeholder="" attr="4:0"></td>
                    <td><input type="text" class="twentyFour-${$(event.target).attr('attr')}" placeholder="" attr="4:1"></td>
                </tr>
                <tr>
                    <td>4:2</td>
                    <td>5:0</td>
                    <td>5:1</td>
                    <td>5:2</td>
                    <td class="font-s">胜其他</td>
                    <td class="font-s">平其他</td>
                    <td class="font-s">负其他</td>
                </tr>
                <tr>
                    <td><input type="text" class="twentyFive-${$(event.target).attr('attr')}" placeholder="" attr="4:2"></td>
                    <td><input type="text" class="twentySix-${$(event.target).attr('attr')}" placeholder="" attr="5:0"></td>
                    <td><input type="text" class="twentySeven-${$(event.target).attr('attr')}" placeholder="" attr="5:1"></td>
                    <td><input type="text" class="twentyEight-${$(event.target).attr('attr')}" placeholder="" attr="5:2"></td>
                    <td><input type="text" class="twentyNine-${$(event.target).attr('attr')}" placeholder="" attr="胜其他"></td>
                    <td><input type="text" class="thirty-${$(event.target).attr('attr')}" placeholder="" attr="平其他"></td>
                    <td><input type="text" class="thirtyOne-${$(event.target).attr('attr')}" placeholder="" attr="负其他"></td>
                </tr>
                `
            )
        }
    })

    // console.log($(".goal,.wod"))
    affirm.click(function(){
        let betAmount = $('.betsum')[0].value
        //每球的赔率
        let isF = []
        $('.goal,.wod,.htc,.cp,.score').each(function(index,item){
            if($($('.goal,.wod,.htc,.cp,.score')[index]).hasClass('redB')){
                isF.push(true)
            }else{
                isF.push(false)
            }
        })
        console.log(bunchId)
        console.log(isF.filter(x => x === true).length)
        if(isF.filter(x => x === true).length == bunchId){
            for(let i =0;i<bunchId;i++){
                let zeroName = `zeroV${i}`
                window[zeroName] = $(`.zero-${i}`)[0]
                let oneName = `oneV${i}`
                window[oneName] = $(`.one-${i}`)[0]
                let twoName = `twoV${i}`
                window[twoName] = $(`.two-${i}`)[0]
                let threeName = `threeV${i}`
                window[threeName] = $(`.three-${i}`)[0]
                let fourName = `fourV${i}`
                window[fourName] = $(`.four-${i}`)[0]
                let fiveName = `fiveV${i}`
                window[fiveName] = $(`.five-${i}`)[0]
                let sixName = `sixV${i}`
                window[sixName] = $(`.six-${i}`)[0]
                let sevenName = `sevenV${i}`
                window[sevenName] = $(`.seven-${i}`)[0]
                let eigName = `eigV${i}`
                window[eigName] = $(`.eig-${i}`)[0]
                let nineName = `nineV${i}`
                window[nineName] = $(`.nine-${i}`)[0]
                let elevenName = `elevenV${i}`
                window[elevenName] = $(`.eleven-${i}`)[0]
                let twelveName = `twelveV${i}`
                window[twelveName] = $(`.twelve-${i}`)[0]
                let thirteenName = `thirteenV${i}`
                window[thirteenName] = $(`.thirteen-${i}`)[0]
                let fourteenName = `fourteenV${i}`
                window[fourteenName] = $(`.fourteen-${i}`)[0]
                let fifteenName = `fifteenV${i}`
                window[fifteenName] = $(`.fifteen-${i}`)[0]
                let sixteenName = `sixteenV${i}`
                window[sixteenName] = $(`.sixteen-${i}`)[0]
                let seventeenName = `seventeenV${i}`
                window[seventeenName] = $(`.seventeen-${i}`)[0]
                let eighteenName = `eighteenV${i}`
                window[eighteenName] = $(`.eighteen-${i}`)[0]
                let nineteenName = `nineteenV${i}`
                window[nineteenName] = $(`.nineteen-${i}`)[0]
                let twentyName = `twentyV${i}`
                window[twentyName] = $(`.twenty-${i}`)[0]
                let twentyOneName = `twentyOneV${i}`
                window[twentyOneName] = $(`.twentyOne-${i}`)[0]
                let twentyTwoName = `twentyTwoV${i}`
                window[twentyTwoName] = $(`.twentyTwo-${i}`)[0]
                let twentyThreeName = `twentyThreeV${i}`
                window[twentyThreeName] = $(`.twentyThree-${i}`)[0]
                let twentyFourName = `twentyFourV${i}`
                window[twentyFourName] = $(`.twentyFour-${i}`)[0]
                let twentyFiveName = `twentyFiveV${i}`
                window[twentyFiveName] = $(`.twentyFive-${i}`)[0]
                let twentySixName = `twentySixV${i}`
                window[twentySixName] = $(`.twentySix-${i}`)[0]
                let twentySevenName = `twentySevenV${i}`
                window[twentySevenName] = $(`.twentySeven-${i}`)[0]
                let twentyEightName = `twentyEightV${i}`
                window[twentyEightName] = $(`.twentyEight-${i}`)[0]
                let twentyNineName = `twentyNineV${i}`
                window[twentyNineName] = $(`.twentyNine-${i}`)[0]
                let thirtyName = `thirtyV${i}`
                window[thirtyName] = $(`.thirty-${i}`)[0]
                let thirtyOneName = `thirtyOneV${i}`
                window[thirtyOneName] = $(`.thirtyOne-${i}`)[0]
                








                let rateName = `rate${i+1}`
                if(typeof window[eigName] == 'undefined' && typeof window[threeName] != 'undefined'){
                    window[rateName] = [window[zeroName],window[oneName], window[twoName], window[threeName], window[fourName], window[fiveName], window[sixName], window[sevenName]];
                }else if(typeof window[threeName] == 'undefined'){
                    window[rateName] = [window[zeroName],window[oneName], window[twoName]];
                }else if(typeof window[nineName] == 'undefined'){
                    window[rateName] = [window[zeroName],window[oneName], window[twoName], window[threeName], window[fourName], window[fiveName], window[sixName], window[sevenName],window[eigName]];
                }else{
                    console.log(3)
                    window[rateName] = [
                        window[zeroName]
                        ,window[oneName]
                        , window[twoName]
                        , window[threeName]
                        , window[fourName]
                        , window[fiveName]
                        , window[sixName]
                        , window[sevenName]
                        , window[eigName]
                        , window[nineName]
                        , window[elevenName]
                        , window[twelveName]
                        , window[thirteenName]
                        , window[fourteenName]
                        , window[fifteenName]
                        , window[sixteenName]
                        , window[seventeenName]
                        , window[eighteenName]
                        , window[nineteenName]
                        , window[twentyName]
                        , window[twentyOneName]
                        , window[twentyTwoName]
                        , window[twentyThreeName]
                        , window[twentyFourName]
                        , window[twentyFiveName]
                        , window[twentySixName]
                        , window[twentySevenName]
                        , window[twentyEightName]
                        , window[twentyNineName]
                        , window[thirtyName]
                        , window[thirtyOneName]
                    ];
                }
                    window[rateName] = window[rateName].filter(item => item.value !== "")
                    let TnameN = `Tname${i}`
                    window[TnameN] = $(`.Tname${i}`)
                }
            }else{
                // $(".sb").append(`
                //     <span>请选择投注模式！</span>
                // `)
                alert("请选择投注模式！")
            }
            // 计算所有组合的奖金
            // let profits = [];
            // let list = []
            window.profits = []
            window.list = []
            if(typeof rate1 !='undefined' && rate1.length >0){
                for(let i=0; i<rate1.length; i++) {
                    if(typeof rate2 !='undefined' && rate2.length >0){
                        for(let j=0; j<rate2.length; j++) {
                            if(typeof rate3 !='undefined' && rate3.length >0){
                                for(let k=0; k<rate3.length; k++){
                                    if(typeof rate4 !='undefined' && rate4.length >0){
                                        for(let z=0; z<rate4.length; z++){
                                            if(typeof rate5 !='undefined' && rate5.length >0){
                                                for(let q=0; q<rate5.length; q++){
                                                    if(typeof rate6 !='undefined' && rate6.length >0){
                                                        for(let w=0; w<rate6.length; w++){
                                                            if(typeof rate7 !='undefined' && rate7.length >0){
                                                                for(let e=0; e<rate7.length; e++){
                                                                    if(typeof rate8 !='undefined' && rate8.length >0){
                                                                        for(let r=0; r<rate8.length; r++){
                                                                            profits.push(rate1[i].value * rate2[j].value * rate3[k].value * rate4[z].value * rate5[q].value * rate6[w].value * rate7[e].value * rate8[r].value);
                                                                            list.push(rate1[i].attributes.attr.value)
                                                                            list.push(rate2[j].attributes.attr.value)
                                                                            list.push(rate3[k].attributes.attr.value)
                                                                            list.push(rate4[z].attributes.attr.value)
                                                                            list.push(rate5[q].attributes.attr.value)
                                                                            list.push(rate6[w].attributes.attr.value)
                                                                            list.push(rate7[e].attributes.attr.value)
                                                                            list.push(rate8[r].attributes.attr.value)
                                                                        }
                                                                    }else{
                                                                        profits.push(rate1[i].value * rate2[j].value * rate3[k].value * rate4[z].value * rate5[q].value * rate6[w].value * rate7[e].value);
                                                                        list.push(rate1[i].attributes.attr.value)
                                                                        list.push(rate2[j].attributes.attr.value)
                                                                        list.push(rate3[k].attributes.attr.value)
                                                                        list.push(rate4[z].attributes.attr.value)
                                                                        list.push(rate5[q].attributes.attr.value)
                                                                        list.push(rate6[w].attributes.attr.value)
                                                                        list.push(rate7[e].attributes.attr.value)
                                                                    }
                                                                }
                                                            }else{
                                                                profits.push(rate1[i].value * rate2[j].value * rate3[k].value * rate4[z].value * rate5[q].value * rate6[w].value);
                                                                list.push(rate1[i].attributes.attr.value)
                                                                list.push(rate2[j].attributes.attr.value)
                                                                list.push(rate3[k].attributes.attr.value)
                                                                list.push(rate4[z].attributes.attr.value)
                                                                list.push(rate5[q].attributes.attr.value)
                                                                list.push(rate6[w].attributes.attr.value)
                                                            }
                                                        }
                                                    }else{
                                                        profits.push(rate1[i].value * rate2[j].value * rate3[k].value * rate4[z].value * rate5[q].value);
                                                        list.push(rate1[i].attributes.attr.value)
                                                        list.push(rate2[j].attributes.attr.value)
                                                        list.push(rate3[k].attributes.attr.value)
                                                        list.push(rate4[z].attributes.attr.value)
                                                        list.push(rate5[q].attributes.attr.value)
                                                    }
                                                }
                                            }else{
                                                profits.push(rate1[i].value * rate2[j].value * rate3[k].value * rate4[z].value);
                                                list.push(rate1[i].attributes.attr.value)
                                                list.push(rate2[j].attributes.attr.value)
                                                list.push(rate3[k].attributes.attr.value)
                                                list.push(rate4[z].attributes.attr.value)
                                            }
                                        }
                                    }else{
                                        profits.push(rate1[i].value * rate2[j].value * rate3[k].value); 
                                        list.push(rate1[i].attributes.attr.value)
                                        list.push(rate2[j].attributes.attr.value)
                                        list.push(rate3[k].attributes.attr.value)
                                    }
                                }
                            }else{
                                profits.push(rate1[i].value * rate2[j].value); 
                                list.push(rate1[i].attributes.attr.value)
                                list.push(rate2[j].attributes.attr.value)
                            }
                        }
                    }else{
                        profits.push(rate1[i].value); 
                        list.push(rate1[i].attributes.attr.value)
                    }
                }
            }else{
            }

            let ratios = profits.map(rate => 1/rate);
            // 正规化比例之和为1  
            let totalRatio = ratios.reduce((a,b) => a+b, 0);

            ratios = ratios.map(ratio => ratio/totalRatio); 
            // console.log(ratios)
            // console.log(betAmount)
            // 计算理论投注金额(四舍五入)
            let expectedBets = ratios.map(ratio => Math.round(ratio * betAmount / 2) * 2);
            // console.log(expectedBets)
            // 调整为2的倍数
            let bets = expectedBets.map(bet => {
            let n = bet;
            while(n % 2 !== 0) {
                n--;
            }
            return n;
            });

            // 计算实际投注金额总和
            
            let actualTotal
            if(profits.length !==0){
                actualTotal = bets.reduce((a,b) => a + b);
            }
            // 如果总和小于总投注金额
            if(actualTotal < betAmount) {
            // 平均分配剩余金额
            //...
            }

            // 如果总和大于总投注金额
            if(actualTotal > betAmount) {
            // 从每个球减少少量金额
            //...
            }
            $('.opendd').empty()
            let s = 0
            let x = []
            let change = 0
            // let Tname1 = $(".Tname1")
            // let Tname2 = $(".Tname2")
            // let Tname3 = $(".Tname3")
            // let Tname4 = $(".Tname4")
            for(let i = 0;i<list.length;i++){
                    $('.opendd').append(`
                        <div class="rnm">
                            <div class="re">${s+1}</div>
                            <div class="oo">
                                ${rate1.length >= 1 ? '<span>'+Tname0.val()+'<span class="red">'+list[i]+'</span></span>' : ''}
                                ${typeof rate2 !='undefined' && rate2.length >0 ? '<span>'+Tname1.val()+'<span class="red">'+list[++i]+'</span></span>' : ''}
                                ${typeof rate3 !='undefined' && rate3.length >0 ? '<span>'+Tname2.val()+'<span class="red">'+list[++i]+'</span></span>' : ''}
                                ${typeof rate4 !='undefined' && rate4.length >0 ? '<span>'+Tname3.val()+'<span class="red">'+list[++i]+'</span></span>' : ''}    
                            </div>
                        </div>
                        <span class="le1">倍数</span>
                        <input class="inp-${s}" type="text" value="${bets[s] / 2}">
                            
                    `)
                    $('.opendd').append(`
                        <span>奖金</span>
                        <span class="red bonus-${s}">${change == 0 ? $(`.inp-${s}`).val()*2*profits[s] : change*2*profits[s]} 元</span>
                        <div class="wire"></div>
                    `)
                x.push(s)
                s++
            }
            let run = 0
            for(let i = 0;i<x.length;i++){
                $(`.inp-${i}`).on('blur',function(){
                    change = $(`.inp-${i}`).val();
                    $(`.bonus-${i}`).text(change*2*profits[i])
                    console.log(x)
                    for(let b = 0;b<x.length;b++){
                        console.log($(`.inp-${b}`).val())
                        // $(`.inp-${b}`).val()
                        run += parseFloat($(`.inp-${b}`).val() * 2) 
                        console.log(run)
                        $('.betsum')[0].value = run
                    }
                    run = 0
                })
                
            }
            // return list
        
    })

    
</script>
<style>
    .rnm{
        width: 306px;
        display: flex;

    }
    .oo{
        width: 276px;
        display: flex;
        justify-content: space-between;
        flex-wrap: wrap;
    }
    .oo>span{
        width: 50%;
    }
</style>
